---
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import { SITE, HOME, SOCIALS } from "@consts";
import ArrowCard from "@components/ArrowCard.astro";
import Link from "@components/Link.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

const projects: CollectionEntry<"projects">[] = (
  await getCollection("projects")
)
  .filter((project) => !project.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_PROJECTS_ON_HOMEPAGE);
---

<Layout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <section class="space-y-2">
      <span>
        <h1 class="text-4xl font-bold">Hello!</h1><h2 class="text-3xl">
          Let Us Introduce Ourselves!
        </h2>
      </span>
      <section class="space-y-8">
        <article>
          <p>
            Competent Governance is on a mission to identify and share effective
            practices in local government. We're developing a comprehensive
            inventory of what works to empower communities to learn and achieve
            better outcomes.
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-semibold">
            A Growing Repository of What Works
          </h2>
          <p>
            We're conducting in-depth analyses of government programs that are
            delivering results, examining their processes, training, and
            outcomes, whenever from public records or working with the local
            governments. The goal is to create a actionable resource for
            understanding and replicating these successes.
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-semibold">Collaborating for Impact</h2>
          <p>
            We're partnering with a wide range of stakeholders who share our
            commitment to improving local governance - from elected officials
            and civil servants to political parties and reform organizations.
            Together, we're working to build the knowledge and capacity needed
            to drive meaningful change.
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-semibold">
            An Evolving Effort, An Enduring Vision
          </h2>
          <p>
            This inventory is a work in progress, and we're continuously
            refining our methodology. But our vision is clear - a future where
            every community can learn from and adopt the most effective
            governance practices. We invite you to join us in this important
            work of enabling better government, one success story at a time.
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-semibold">
            From Inspiration to Implementation
          </h2>
          <p>
            While our approach shares some similarities with Solution
            Journalism, our mission extends beyond reporting. We're not just
            aiming to highlight what's working, but to provide the practical
            resources needed to replicate those successes.
          </p>
          <p>
            As our knowledge base grows, it will offer increasingly detailed
            guidance on implementing proven solutions. We're committed to
            partnering with stakeholders to spread these practices and support
            their adoption. The goal is to enable widespread change, not just
            inspire it.
          </p>
        </article>

        <article>
          <h2 class="text-2xl font-semibold">
            Harnessing Technology for Scalable Impact
          </h2>
          <p>
            As a small team with a big mission, we're strategically leveraging
            technology to maximize our reach and impact at every stage of our
            work.
          </p>
          <p>
            To handle the amount of work ahead of us, we are building data tools
            to help us identify promising practices from vast amounts of
            government information, and help us turn what works into materials
            to help other implement the same.
          </p>
        </article>

        <section class="mt-12">
          <h2 class="text-2xl font-semibold">Get Involved</h2>
          <p class="mt-4">
            If you're interested in learning more or getting involved, please
            fill out the form below or reach out to us on social media.
          </p>

          <form
            name="contact"
            method="POST"
            data-netlify="true"
            class="mt-8 grid grid-cols-1 gap-6"
          >
            <input type="hidden" name="form-name" value="contact" />

            <div class="flex flex-col">
              <label for="name" class="mb-2 font-semibold">Your Name</label>
              <input
                type="text"
                name="name"
                id="name"
                class="rounded-md border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                placeholder="John Doe"
                required
              />
            </div>

            <div class="flex flex-col">
              <label for="email" class="mb-2 font-semibold">Email address</label
              >
              <input
                type="email"
                name="email"
                id="email"
                class="rounded-md border border-gray-300 px-4 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none"
                placeholder="john@example.com"
                required
              />
            </div>
            <button
              type="submit"
              class="rounded-md bg-blue-500 px-4 py-2 font-semibold text-white transition duration-300 ease-in-out hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:outline-none"
            >
              Sign up!
            </button>
          </form>
        </section>
        <section class="animate space-y-6">
          <div class="flex flex-wrap items-center justify-between gap-y-2">
            <h2 class="text-2xl font-semibold">Current projects</h2>
            <Link href="/projects"> See all projects </Link>
          </div>
          <ul class="not-prose flex flex-col gap-4">
            {
              projects.map((project) => (
                <li>
                  <ArrowCard entry={project} />
                </li>
              ))
            }
          </ul>
        </section>
      </section>
      <section class="mt-12">
        <h2 class="text-2xl font-semibold">Connect with Us</h2>
        <ul class="mt-4 flex space-x-4">
          {
            SOCIALS.map((SOCIAL) => (
              <li class="flex gap-x-2 text-nowrap">
                <Link
                  href={SOCIAL.HREF}
                  external
                  aria-label={`${SITE.TITLE} on ${SOCIAL.NAME}`}
                >
                  {SOCIAL.NAME}
                </Link>
                {"/"}
              </li>
            ))
          }
        </ul>
      </section>
    </section>
  </Container>
</Layout>
